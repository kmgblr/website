<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Book Your Free Trial Class — KMG Bangalore</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">
        <img src="logo.png" alt="KMG logo">
        <div class="brand">Krav Maga Global - Bangalore</div>
      </div>
    </div>
  </header>

  <main class="container" style="padding-top:40px;">
    <h1>Book Your Free Trial Class</h1>

    <p>Please fill in your details. We will contact you shortly.</p>

   <form id="trialForm">
  <label>First Name</label>
  <input type="text" id="firstName" required>

  <label>Last Name</label>
  <input type="text" id="lastName" required>

  <label>Phone Number</label>
  <input type="tel" id="phone" required>

  <button type="submit" class="submit-btn">Submit</button>
</form>

<p id="thankYouMsg" style="display:none; font-weight:700; margin-top:20px; color:green;">
  Thank you for contacting us, redirecting you to WhatsApp…
</p>

  </main>

  <script>
    // WhatsApp Redirect Logic
    document.getElementById("trialForm").addEventListener("submit", function(e){
      e.preventDefault();

      const first = document.getElementById("firstName").value;
      const last = document.getElementById("lastName").value;
      const phone = document.getElementById("phone").value;

      const message = `Hello, my name is ${first} ${last}. I would like to book a free trial class. My phone number is ${phone}.`;
      const encoded = encodeURIComponent(message);

      const whatsappURL = `https://wa.me/918123456855?text=${encoded}`;

      window.location.href = whatsappURL;
    });
  </script>
<script>
document.getElementById("trialForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const firstName = document.getElementById("firstName").value;
  const lastName  = document.getElementById("lastName").value;
  const phone     = document.getElementById("phone").value;

  // Send data to Google Sheets
  fetch("https://script.google.com/macros/s/AKfycbwahH7OLq4CBj_Wo-YwBDv59rJwW88_e4FoA8b92qmS07oRY0XdEruhShI8BuRa4Ub72g/exec", {
    method: "POST",
    body: JSON.stringify({
      firstName: firstName,
      lastName: lastName,
      phone: phone
    })
  })
  .then(res => res.json())
  .then(() => {
    // Show thank-you message
    document.getElementById("thankYouMsg").style.display = "block";

    // WhatsApp redirect after a short delay
    setTimeout(() => {
      const msg = `Hi, my name is ${firstName} ${lastName}. I would like to book a trial class. My phone number is ${phone}.`;
      const phoneNumber = "918123456855"; // your WhatsApp business number
      const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(msg)}`;

      window.location.href = url;
    }, 1200);
  })
  .catch(err => alert("Something went wrong. Please try again."));
});
</script>

</body>
</html>
